<!DOCTYPE html>
<html lang="zxx" class="js"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="author" content="Softnio">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    
    <link rel="shortcut icon" href="/images/favicon.png">
    
    <title>TeamFence</title>
    
    
    
    
    
    
    <link rel="stylesheet" href='/css/vendor.bundle.min.css?ver=210'>
    <link rel="stylesheet" href='/css/style-lungwort.min.css?ver=210'>
    
    <link rel="stylesheet" href='/css/theme.min.css?ver=210'>
    <link rel="stylesheet" href='/css/custom.min.css?ver=210'>
</head>
<body class="nk-body body-wider theme-light mode-onepage"> 
<div class="nk-wrap">
    <header class="nk-header page-header is-transparent is-sticky is-shrink is-dark" id="header"> 
        <div class="header-main">
    <div class="header-container container">
        <div class="header-wrap">
            
            <div class="header-logo logo animated" data-animate="fadeInDown" data-delay=".65">
                <a href="/" class="logo-link">
                    <img class="logo-dark" src="/images/logo.png" srcset="/images/logo.png" alt="logo">
                    <img class="logo-light" src="/images/logo-white.png" srcset="/images/logo-white.png" alt="logo">
                </a>
            </div>
            
            <div class="header-nav-toggle">
                <a href="/" class="navbar-toggle" data-menu-toggle="example-menu-04">
                    <div class="toggle-line">
                        <span></span>
                    </div>
                </a>
            </div>
            
            <div class="header-navbar header-navbar-s1">
                <nav class="header-menu" id="example-menu-04">
                    <ul class="menu menu-s2 animated" data-animate="fadeInDown" data-delay=".75">
                        
                        <li class="menu-item">
                            <a class="menu-link nav-link" href="/it/">Home</a>
                        </li>
                        
                        <li class="menu-item">
                            <a class="menu-link nav-link" href="/it/#services">Servizi</a>
                        </li>
                        
                        <li class="menu-item">
                            <a class="menu-link nav-link" href="/it/#about">Azienda</a>
                        </li>
                        
                        <li class="menu-item">
                            <a class="menu-link nav-link" href="/it/posts">Blog</a>
                        </li>
                        
                        <li class="menu-item">
                            <a class="menu-link nav-link" href="/it/about/">Chi Siamo</a>
                        </li>
                        
                    </ul>
                    <ul class="menu-btns animated" data-animate="fadeInDown" data-delay=".85">
                        
                        <li><a href="#contact" class="btn btn-rg btn-auto btn-outline btn-grad on-bg-theme btn-round">
                            <span>Contattaci</span></a>
                        </li>
                        
                        <li class="menu-item">
                            <div class="language-switcher language-switcher-s3 toggle-wrap">
                                <a class="toggle-tigger" href="#">Italiano</a>
                                <ul class="toggle-class toggle-drop text-center drop-list drop-list-xs">
                                    
                                    <li><a href="http://localhost:1313/posts/lsass-extractor/">en</a></li>
                                    
                                    <li><a href="http://localhost:1313/de/posts/lsass-extractor/">de</a></li>
                                    
                                    <li><a href="http://localhost:1313/fr/posts/lsass-extractor/">fr</a></li>
                                    
                                    <li><a href="http://localhost:1313/es/posts/lsass-extractor/">es</a></li>
                                    
                                </ul>
                            </div>
                            
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</div>

        <div class="header-banner bg-purple"> 
            <div class="nk-ovm shape-a-sm"></div>
        </div>
        
    </header>
    <main class="nk-pages">
        <section class="section bg-light">
            <div class="container" style="margin-top: -50px">
                <div class="nk-block nk-block-blog">
                    <div class="row">
                        <div class="col-12">
                            <div class="blog-details">
                                <div class="row justify-content-center">
                                    <div class="col-xl-8 col-lg-10">
                                        <ul class="blog-meta">
                                            <li><a href="#">September 16, 2023</a></li>
                                            <li><a href="#">8  minutes  read</a></li>
                                        </ul>
                                        <div class="blog-content">
                                            <h2 class="title"><a href="#">Estrattore di Lsass</a></h2>
                                            <div class="col-xl-10 col-lg-12">
                                                <div class="blog-featured">
                                                    <div class="img-wrapper-single">
                                                        <div class="box box1" id="img-container">
                                                            <img class="round post-image" src="/posts/lsass-extractor/static/cover.png" alt="featured">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div> 
                                                <h2 id="introduzione">Introduzione</h2>
<p>In TeamFence, crediamo fermamente che sia sempre più importante per un operatore offensivo comprendere i dettagli delle tecniche e degli strumenti.</p>
<p>Per questo motivo, in questo post del blog, esploreremo come Mimikatz estrae le credenziali dai dump di lsass, permettendoci di reimplementare la logica in uno strumento su misura per le nostre esigenze future.</p>
<p><strong>Nota</strong>: tutte le analisi condotte durante questo progetto sono state eseguite su una workstation Windows 11 Enterprise Evaluation.</p>
<h2 id="perché-lsass">Perché LSASS?</h2>
<p>Prima di entrare nei dettagli tecnici, è importante chiedersi: perché lo stiamo facendo?</p>
<p>Quando un hacker ottiene l&rsquo;accesso a una macchina target che esegue Windows, uno dei primi passaggi cruciali consiste nell&rsquo;ottenere le credenziali. Windows offre molte potenziali destinazioni, ma due principali repository si distinguono: il database di sicurezza locale (Security Account Manager) e il processo LSASS (Local Security Authority Subsystem Service).</p>
<p>In questo post ci concentreremo su LSASS, che funge da componente centrale in Windows, supervisionando l&rsquo;autenticazione. Come centro nevralgico per le richieste di autenticazione provenienti da vari servizi, svolge un ruolo fondamentale nel semplificare il flusso di autenticazione. Questo processo implementa vari pacchetti di autenticazione come NTLM, Kerberos, WDigest, tra gli altri. Di conseguenza, rappresenta un obiettivo prezioso e ricco di informazioni per gli hacker.</p>
<h2 id="hash-ntlm">Hash NTLM</h2>
<p>Come abbiamo visto nella sezione precedente, LSASS gestisce diversi pacchetti di autenticazione, incluso NTLM. NTLM è un protocollo di autenticazione challenge-response ampiamente utilizzato negli ambienti Windows. Quando un utente accede a una macchina Windows, il sistema memorizza le credenziali dell&rsquo;utente in memoria. Queste informazioni includono la password dell&rsquo;utente sotto forma di hash NTLM.</p>
<p>In questo post ci concentreremo sull&rsquo;estrazione di questi hash NTLM dal processo LSASS, il che ci permetterà di comprendere più facilmente la logica sottostante.</p>
<p>Nell&rsquo;immagine seguente possiamo vedere la struttura interna di LSASS, evidenziando dove vengono memorizzati gli hash NTLM.</p>
<p><img alt="lsass" src="/posts/lsass-extractor/static/lsass-structure.png"></p>
<h2 id="dove-si-trovano-tutti-i-pezzi">Dove si trovano tutti i pezzi?</h2>
<p>Per iniziare, è fondamentale comprendere dove sono memorizzate le informazioni e in quale formato. Il processo LSASS è un componente critico, e non tutte le informazioni sono memorizzate in chiaro. In questo caso, gli hash NTLM sono crittografati. Pertanto, per estrarli, dobbiamo individuare le chiavi per la decrittazione. Il diagramma seguente illustra quali moduli sono coinvolti nella gestione delle chiavi e delle credenziali.</p>
<!-- raw HTML omitted -->
<p>È importante ricordare che il materiale crittografico del processo LSASS è una data runtime, il che significa che cambia dopo ogni riavvio. Di conseguenza, dobbiamo estrarlo ogni volta per garantire informazioni aggiornate.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>&#34;È interessante notare che la gestione della crittografia viene effettuata tramite LsaProtectMemory, che è un wrapper per LsaEncryptMemory, che a sua volta è un wrapper per BCryptEncrypt, una funzione di crittografia comune presente in bcrypt.h&#34;
</span></span></code></pre></div><h2 id="modelli-di-moduli">Modelli di moduli</h2>
<p>A questo punto, abbiamo una chiara comprensione di quale area della memoria contenga tutti i pezzi. Ora dobbiamo trovare un modo per estrarli. Analizzando il codice di PyPyKatz, una versione Python di Mimikatz, possiamo comprendere l&rsquo;approccio utilizzato per estrarre le chiavi e le credenziali.</p>
<p>Prima di tutto, dobbiamo estrarre alcune informazioni sul sistema: ProcessorArchitecture, BuildNumber e dal &ldquo;ModuleListStream&rdquo; il TimeDateStamp di &ldquo;lsasrv.dll&rdquo;.</p>
<p>Una volta ottenute queste informazioni, possiamo utilizzarle per identificare il modello corretto da usare per l&rsquo;estrazione. I modelli sono classi che contengono la firma e gli offset che ci permettono di sapere come muoverci all&rsquo;interno della memoria per estrarre le chiavi e le credenziali.</p>
<p>Nel nostro caso, che è una Windows 11 Enterprise Evaluation, il modello per la parte lsasrv.dll è il seguente:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">LSA_x64_6</span>(LsaTemplate_NT6):
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">def</span> __init__(self):
</span></span><span style="display:flex;"><span>		LsaTemplate_NT6<span style="color:#f92672">.</span>__init__(self)
</span></span><span style="display:flex;"><span>		self<span style="color:#f92672">.</span>key_pattern <span style="color:#f92672">=</span> LSADecyptorKeyPattern()
</span></span><span style="display:flex;"><span>		self<span style="color:#f92672">.</span>key_pattern<span style="color:#f92672">.</span>signature <span style="color:#f92672">=</span> <span style="color:#e6db74">b</span><span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\x83\x64\x24\x30\x00\x48\x8d\x45\xe0\x44\x8b\x4d\xd8\x48\x8d\x15</span><span style="color:#e6db74">&#39;</span>
</span></span><span style="display:flex;"><span>		self<span style="color:#f92672">.</span>key_pattern<span style="color:#f92672">.</span>IV_length <span style="color:#f92672">=</span> <span style="color:#ae81ff">16</span>
</span></span><span style="display:flex;"><span>		self<span style="color:#f92672">.</span>key_pattern<span style="color:#f92672">.</span>offset_to_IV_ptr <span style="color:#f92672">=</span> <span style="color:#ae81ff">67</span>
</span></span><span style="display:flex;"><span>		self<span style="color:#f92672">.</span>key_pattern<span style="color:#f92672">.</span>offset_to_DES_key_ptr <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">89</span>
</span></span><span style="display:flex;"><span>		self<span style="color:#f92672">.</span>key_pattern<span style="color:#f92672">.</span>offset_to_AES_key_ptr <span style="color:#f92672">=</span> <span style="color:#ae81ff">16</span>
</span></span><span style="display:flex;"><span>				
</span></span><span style="display:flex;"><span>		self<span style="color:#f92672">.</span>key_struct <span style="color:#f92672">=</span> KIWI_BCRYPT_KEY81
</span></span><span style="display:flex;"><span>		self<span style="color:#f92672">.</span>key_handle_struct <span style="color:#f92672">=</span> KIWI_BCRYPT_HANDLE_KEY
</span></span></code></pre></div><p>Dai un&rsquo;occhiata al <a href="https://github.com/skelsec/pypykatz/blob/c91dcdc09289ad2e93c475e7c640d0f90906a7c0/pypykatz/lsadecryptor/lsa_template_nt6.py#L301">codice sorgente</a> di PyPyKatz per vedere tutti i modelli.</p>
<h2 id="estrazione-del-vettore-di-inizializzazione">Estrazione del vettore di inizializzazione</h2>
<p>Per estrarre le chiavi, dobbiamo prima estrarre il Vettore di Inizializzazione (IV). L&rsquo;IV è un numero casuale utilizzato per garantire che lo stesso messaggio in chiaro non risulti nello stesso testo cifrato. L&rsquo;IV è memorizzato in memoria, e possiamo estrarlo cercando nella memoria del modulo lsasrv.dll il pattern presente nel modello.</p>
<p>Una volta trovato il pattern, possiamo usare gli offset per spostarci all&rsquo;interno della memoria ed estrarre l&rsquo;IV.</p>
<!-- raw HTML omitted -->
<p>Come possiamo vedere dallo schema, una volta individuato il pattern, dobbiamo saltare un offset prefissato (presente nel modello) di 67 byte per trovare un altro valore, che è un altro offset. Questo offset è la posizione dell&rsquo;IV.</p>
<h2 id="estrazione-delle-chiavi">Estrazione delle chiavi</h2>
<p>Ora è il momento di estrarre le chiavi. L&rsquo;approccio è simile a quello utilizzato per estrarre l&rsquo;IV. Dobbiamo trovare lo stesso pattern in memoria e poi utilizzare gli offset per estrarre le chiavi.</p>
<!-- raw HTML omitted -->
<p>Questa volta, utilizzando il puntatore, non si arriva direttamente al valore desiderato, ma piuttosto a una struttura BCRYPT_KEY_HANDLE, che, in bcrypt.h, è un tipo di dati che consente di fare riferimento e manipolare chiavi crittografiche all&rsquo;interno del framework CNG. In pypykatz, la classe KIWI_BCRYPT_HANDLE_KEY replica questo tipo.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">KIWI_BCRYPT_HANDLE_KEY</span> :
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__ ( self , reader ) :
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>size <span style="color:#f92672">=</span> ULONG( reader )<span style="color:#f92672">.</span>value
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>tag <span style="color:#f92672">=</span> reader<span style="color:#f92672">.</span>read(<span style="color:#ae81ff">4</span>) <span style="color:#75715e">#&#39;UUUR&#39;</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>hAlgorithm <span style="color:#f92672">=</span> PVOID(reader)<span style="color:#f92672">.</span>value
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>ptr_key <span style="color:#f92672">=</span> PKIWI_BCRYPT_KEY(reader)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>unk0 <span style="color:#f92672">=</span> PVOID (reader)<span style="color:#f92672">.</span>value
</span></span><span style="display:flex;"><span>[<span style="color:#f92672">...</span>]
</span></span></code></pre></div><p>A questo punto, abbiamo tutte le informazioni necessarie per decriptare gli hash NTLM. Abbiamo l&rsquo;IV e le chiavi. Possiamo ora iniziare la ricerca delle LogonSessions.</p>
<h2 id="logonsessions">LogonSessions</h2>
<p>Le LogonSessions sono le strutture che contengono le informazioni sugli utenti connessi al sistema. Le LogonSessions sono memorizzate nella memoria del modulo Msv1_0.dll, e possiamo estrarle cercando il pattern presente nel modello specifico, che nel nostro caso è il seguente:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">elif</span> WindowsBuild<span style="color:#f92672">.</span>WIN_11_2022<span style="color:#f92672">.</span>value <span style="color:#f92672">&lt;=</span> sysinfo<span style="color:#f92672">.</span>buildnumber <span style="color:#f92672">&lt;</span> WindowsBuild<span style="color:#f92672">.</span>WIN_11_2023<span style="color:#f92672">.</span>value: <span style="color:#75715e">#20348</span>
</span></span><span style="display:flex;"><span>    template<span style="color:#f92672">.</span>signature <span style="color:#f92672">=</span> <span style="color:#e6db74">b</span><span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\x45\x89\x34\x24\x4c\x8b\xff\x8b\xf3\x45\x85\xc0\x74</span><span style="color:#e6db74">&#39;</span>
</span></span><span style="display:flex;"><span>    template<span style="color:#f92672">.</span>first_entry_offset <span style="color:#f92672">=</span> <span style="color:#ae81ff">24</span>
</span></span><span style="display:flex;"><span>    template<span style="color:#f92672">.</span>offset2 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">4</span>
</span></span></code></pre></div><p>Non è possibile conoscere il numero esatto di LogonSessions presenti in memoria, quindi dobbiamo prima recuperare il contatore.</p>
<h4 id="contatore-delle-logonsessions-e-indirizzi">Contatore delle LogonSessions e indirizzi</h4>
<p>Con un approccio simile a quello utilizzato per estrarre l&rsquo;IV e le chiavi, dobbiamo trovare il pattern in memoria e poi utilizzare gli offset per estrarre il contatore.</p>
<p>Questo contatore ci permette di iterare su tutti gli indirizzi delle LogonSessions, dove ogni voce si trova 16 byte dopo la precedente.</p>
<!-- raw HTML omitted -->
<p>Convertendo questi indirizzi in un char*, diventano un puntatore che punta alla posizione della memoria in cui sono memorizzate le voci delle LogonSessions. Ciò consente di accedere ai dati associati alla LogonSession, permettendo il recupero delle informazioni rilevanti.</p>
<h4 id="nome-utente-e-dominio">Nome utente e dominio</h4>
<p>Ora che abbiamo gli indirizzi delle LogonSessions, possiamo iniziare a estrarre le informazioni. Saltando all&rsquo;offset di 144 byte dall&rsquo;indirizzo, sono presenti diversi campi, tra cui la lunghezza del nome utente, la lunghezza massima e un puntatore al nome utente effettivo.
La stessa logica si applica al dominio, che è memorizzato in memoria dopo il puntatore al nome utente.</p>
<p>Ora è possibile estrarre il nome utente e il dominio dell&rsquo;utente seguendo i puntatori e leggendo dalla memoria il numero esatto di byte memorizzati nel campo di lunghezza massima.</p>
<!-- raw HTML omitted -->
<h4 id="lista-delle-credenziali">Lista delle credenziali</h4>
<p>Per l&rsquo;ultima parte dell&rsquo;estrazione, dobbiamo concentrarci sulle liste delle credenziali. Partendo dal pointerToDomain visto nella sezione precedente, avanzando di un offset di 96 byte, è possibile trovare l&rsquo;indirizzo di memoria in cui è situata la prima &lsquo;Lista delle credenziali&rsquo;. Una volta letto il valore all&rsquo;indirizzo puntato come uint64_t e successivamente interpretato come indirizzo di memoria, esso fornirà l&rsquo;indirizzo di memoria in cui è situata la seconda &lsquo;Lista delle credenziali&rsquo;, e questo processo continua iterativamente. Poiché si tratta di una lista collegata circolare, quando il valore corrisponde all&rsquo;indirizzo di memoria della prima struttura, ciò indica che l&rsquo;intera lista è stata attraversata.</p>
<p>Ogni voce nella lista collegata della &lsquo;Lista delle credenziali&rsquo; contiene la propria lista collegata associata, nota come &lsquo;Lista delle credenziali primarie&rsquo;. Per recuperare l&rsquo;indirizzo della prima voce in questa lista collegata, è necessario avanzare di un offset di 16 byte e leggere quest&rsquo;area di memoria come puntatore char.</p>
<p>Il seguente schema illustra la struttura delle liste:
<!-- raw HTML omitted --></p>
<p>All&rsquo;interno di questa struttura finale, si può trovare l&rsquo;hash NTLM crittografato. Proprio come nella lista collegata della &lsquo;Lista delle credenziali&rsquo;, interpretando il numero all&rsquo;indirizzo della prima voce della Lista primaria come un indirizzo, si scopre la successiva struttura, seguendo una lista circolare. Seguendo la struttura, è possibile recuperare la dimensione dell&rsquo;NTLM crittografato e l&rsquo;indirizzo di memoria in cui si trova questo NTLM, consentendone la successiva lettura ed estrazione.</p>
<h2 id="decrittazione-ntlm">Decrittazione NTLM</h2>
<p>L&rsquo;algoritmo di crittografia utilizzato per crittografare l&rsquo;hash non può essere determinato in anticipo. Per identificare l&rsquo;algoritmo, l&rsquo;NTLM crittografato viene diviso per 8 e il resto viene controllato per vedere se la lunghezza dell&rsquo;NTLM è divisibile per 8. Se la lunghezza dell&rsquo;NTLM è divisibile per 8, viene utilizzata la crittografia AES. Se la lunghezza dell&rsquo;NTLM non è divisibile per 8, indicando una lunghezza irregolare, viene utilizzata la crittografia 3DES.</p>
<p>Il seguente pseudocodice rappresenta la logica di selezione dell&rsquo;algoritmo:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> ( encryptedNTLMLength <span style="color:#f92672">%</span> <span style="color:#ae81ff">8</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span> <span style="color:#75715e">// La credenziale crittografata era vuota?
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span> <span style="color:#75715e">// Preparare le funzioni dell&#39;algoritmo e l&#39;IV
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> <span style="color:#66d9ef">if</span> ( encryptedNTLMLength <span style="color:#f92672">%</span> <span style="color:#ae81ff">8</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Eseguire la decrittazione AES utilizzando la chiave fornita
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Eseguire la decrittazione 3DES utilizzando la chiave fornita
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Una volta identificato l&rsquo;algoritmo utilizzato, il compito rimanente è applicare le informazioni acquisite utilizzando la libreria bcrypt.h, seguendo lo stesso approccio di MSV. Configurando le variabili necessarie per utilizzare l&rsquo;algoritmo corretto e successivamente invocando la funzione BCrypt-Decrypt con la chiave crittografata e l&rsquo;IV recuperato, diventa possibile recuperare l&rsquo;hash NTLM in testo semplice.</p>

                                            </div>
                                        </div>
                                        <ul class="blog-tags"> 
                                            
                                            
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <div class="preloader preloader-alt no-split">
        <span class="spinner spinner-alt">
            <img class="spinner-brand" src="/images/logo-white.png" alt=""> 
        </span>
    </div>
    





<script defer  src='/js/jquery.bundle.min.5982afc908c46b2144b576a651c29adc72bf2dfa9685a00c7dd16b77aba777a4d1c66ba9fe480a81bc42cc40879d8d16d3660e1ff7e0b6e9ca1f4b78d11ebbab.js?ver=210'></script>
<script defer  src='/js/scripts.min.810c4e3229f07102e6da786e19bada1559816724bfcb53aaffc206384b0935134d42df8a0048ea62bbe01e23993b85f12897baf4e45862d5e767c65a878cbd61.js?ver=210'></script>
<script defer  src='/js/charts.min.233bec70385379d36087ce327911a0880e9f24394a47f3ac96262f2ab5ec6e6abcd23516c1250b6b9686a39298686089a91247237a53dfcdc082554f810b8cad.js?ver=210'></script>
<script defer  src='/js/toastr.examples.min.8db0f69b90e47bd433705b43acc2ffcc16aeaa78f06edd02fdc97e67abad460d09fe0135f2e92bc5b30ad986d87467ca3e33d470592d4c1d181554fdd8791fc6.js?ver=210'></script>
<section id="footer">
    <footer class="nk-footer bg-theme-dark">
        <div class="tc-light">
            <div class="container">
                <div class="nk-block">
                    <div class="bg-theme-accent-alt round subscribe-wrap animated" data-animate="fadeInUp" data-delay=".1">
                        <div class="row text-center text-md-start justify-content-center align-items-center gutter-vr-25px">
                            <div class="col-lg-6">
                                <div class="wide-auto-sm">
                                    <h4 class="title-sm">Non perderti nulla, rimani aggiornato</h4>
                                    <p>Iscriviti per ricevere aggiornamenti e notizie di mercato. Iscriviti alla nostra newsletter e ricevi aggiornamenti su TeamFence.</p>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="gap-3x d-none d-lg-block"></div>
                                <form action="https://formspree.io/f/meojgrqj" class="nk-form-submit" method="post">
                                    <div class="field-inline field-inline-s2 field-inline-s2-sm bg-white shadow-soft">
                                        <div class="field-wrap">
                                            <input class="input-solid input-solid-md required email" type="email" name="email" placeholder="Your email" required>
                                            <input type="text" class="d-none" name="_gotcha" style="display:none">
                                        </div>
                                        <div class="submit-wrap">
                                            <button type="submit" class="btn btn-md btn-grad">Iscriviti</button>
                                        </div>
                                    </div>
                                    <div class="form-results" id="form-results" style="display: none;"></div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="space-to-color-2" class="nk-ovm ovm-top ovm-h-50 bg-theme-alt"></div>
        </div>
        <div class="section section-footer section-m tc-light bg-transparent ov-h">
            <div class="container">
                <div class="nk-block block-footer">
                    <div class="row">
                        <div class="col">
                            <div class="wgs wgs-text text-center mb-3">
                                <ul class="social pdb-l justify-content-center">
                                    <li><a href="#"><em class="social-icon fab fa-facebook-f"></em></a></li>
                                    <li><a href="#"><em class="social-icon fab fa-twitter"></em></a></li>
                                    <li><a href="#"><em class="social-icon fab fa-youtube"></em></a></li>
                                    <li><a href="#"><em class="social-icon fab fa-github"></em></a></li>
                                    <li><a href="#"><em class="social-icon fab fa-bitcoin"></em></a></li>
                                    <li><a href="#"><em class="social-icon fab fa-medium-m"></em></a></li>
                                </ul>
                                <a href="./" class="footer-logo">
                                    <img src="/images/logo-white.png" srcset="/images/logo-white.png" alt="logo" style="width: 25%">
                                </a>
                                <div class="copyright-text copyright-text-s3 pdt-m">
                                    <p><span class="d-sm-block">Copyright © 2024, TeamFence sagl CHE-197.469.909<br>Viale Castagnola 27, 6900 Lugano</span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="nk-ovm shape-s"></div>
        </div>
    </footer>
</section>
<script>
    function changeColorBasedOnURL() {
        var spaceToColor = document.getElementById('space-to-color-2');
        var currentURL = window.location.href;
    
        if (currentURL.includes("/services")) 
            spaceToColor.id = "space-to-color";
        else if (currentURL.includes("/about"))
            spaceToColor.id = "space-to-color";
        else if (currentURL.includes("/team"))
            spaceToColor.id = "space-to-color";
        else if (currentURL.includes("/ctem-details"))
            spaceToColor.id = "space-to-color";
        else if (currentURL.match(/\/posts\/[a-zA-Z0-9_-]+/)) 
            spaceToColor.id = "space-to-color";
    }
    
    window.onload = changeColorBasedOnURL;
    </script>
    </div>
</body>
</html>